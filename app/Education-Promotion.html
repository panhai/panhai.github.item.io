<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>学历推广</title>
		<meta http-equiv="Pragma" content="no-cache" />
		<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport">
		<meta content="yes" name="apple-mobile-web-app-capable">
		<meta content="black" name="apple-mobile-web-app-status-bar-style">
		<meta content="telephone=no" name="format-detection">
		<link rel="stylesheet" type="text/css" href="css/base.css" />
		<link rel="stylesheet" type="text/css" href="css/Education-Promotion.css" />
		<link rel="stylesheet" type="text/css" href="mui/css/mui.min.css" />
		<link rel="stylesheet" type="text/css" href="ydui/css/ydui.css" />
		<script src="js/changHtmlFontSize.js"></script>
	</head>
	<body>
		<div class="app">
			<div class="head">
				<div class="m-slider" id="J_Slider">
					<div class="slider-wrapper">
						<div class="slider-item">
							<a href="javascript:;">
								<img src="img/tuiguang_01.png">
							</a>
						</div>
					</div>
				</div>
			</div>
			<!-- 内容 -->
			<div class="main">
				<form action="" method="post" class="main_form">
					<p>
						<span>1、您的最高学历是（单选）</span>
						<span style="color: red;">*</span>
					</p>
					<div class="mui_card mui-input-group">
						<div class="mui-input-row mui-radio mui-left">
							<label>初中以下<input name="radio1" type="radio" class="Education"></label>
						</div>
						<div class="mui-input-row mui-radio mui-left">
							<label>高中<input name="radio1" type="radio" class="Education"></label>
						</div>
						<div class="mui-input-row mui-radio mui-left">
							<label>中专/中技<input name="radio1" type="radio" class="Education"></label>
						</div>
						<div class="mui-input-row mui-radio mui-left">
							<label>大专<input name="radio1" type="radio" class="Education"></label>
						</div>
					</div>
					<p>
						<span>2、您的年龄（单选）</span>
						<span style="color: red;">*</span>
					</p>
					<div class="mui_card mui-input-group">
						<div class="mui-input-row mui-radio mui-left">
							<label>18-23<input name="radio2" type="radio" class="Age"></label>
						</div>
						<div class="mui-input-row mui-radio mui-left">
							<label>24-29<input name="radio2" type="radio" class="Age"></label>
						</div>
						<div class="mui-input-row mui-radio mui-left">
							<label>30-35<input name="radio2" type="radio" class="Age"></label>
						</div>
						<div class="mui-input-row mui-radio mui-left">
							<label>35以上<input name="radio2" type="radio" class="Age"></label>
						</div>
					</div>
					<p>
						<span>3、您的户籍（单选）</span>
						<span style="color: red;">*</span>
					</p>
					<div class="mui_card mui-input-group">
						<div class="mui-input-row mui-radio mui-left">
							<label>广东户籍<input name="radio3" type="radio" class="HouseholdRegister"></label>
						</div>
						<div class="mui-input-row mui-radio mui-left">
							<label>非广东户籍<input name="radio3" type="radio" class="HouseholdRegister"></label>
						</div>
					</div>
					<p>
						<span>3、您的姓名:</span>
						<span style="color: red;">*</span>
					</p>
					<div style="padding-top: 5px;">
						<input type="text" placeholder="请输入" class="personName" maxlength="8">
					</div>
					<p>
						<span>3、您的手机号（必填项）:</span>
						<span style="color: red;">*</span>
					</p>
					<div style="padding-top: 5px;">
						<input type="text" placeholder="请输入" class="phone" maxlength="11">
					</div>
					<div class="item citem">
						<div class="p-cheack">
							<input type="radio" name="" id="" value="" checked class="check cur" />
						</div>
						<span style="margin-left: 20px;font-size: 0.16rem;">自动输入历史手机号</span>
						<a href="javascript:;" class="person" style="font-size: 0.16rem;color: #007AFF;cursor: pointer;">《个人信息授权书》</a>
					</div>
					<div class="m-button">
						<button type="button" class="getResults">立即获取资料</button>
					</div>
				</form>
			</div>
			<div class="footer">
				<div class="m-slider" id="J_Slider">
					<div class="slider-wrapper">
						<div class="slider-item">
							<a href="javascript:;">
								<img src="img/footerImg_03.png">
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<!-- 个人信息授权弹框 getResultModel-->
		<div class="motal None">
		</div>
		<div class="getResultModel None" >
			<span class="close" style="font-weight: 300;"></span>
			<h2>个人信息授权书</h2>
			<div class="msg_box">
				<p>
					尊敬的用户，您选择使用“自动输入历史手机号”功
					能后，您同意本平台在法律允许的范围内，收集您的
					手机号码，您已知晓并同意在您下次浏览广告页面
					时，我们会帮您预先填写您上次输入的历史手机号，
					您的手机号码仅会用于在广告页面的预填充，且只有
					您点击提交按钮之后信息才会传递给广告主商家。
				</p>
			</div>
		</div>
		
		<!-- 手机验证弹框 -->
		<div class="phoneModel None">
			<span class="close" style="font-weight: 300;"></span>
			<p style="color: #333333;padding: 10px 0;font-size: 15px;">手机验证</p>
			<div style="font-size: 12px;padding-bottom: 15px;">
				<span>短信验证码已发送至</span>
				<span class="telphone" style="font-size: 14px;"></span>
			</div>
			<form action="" method="post">
				<div style="position: relative;line-height: 38px;">
					<input type="text" name="ma" class="ma" value="" placeholder="请输入短信验证码">
					<span style="color: #007AFF;position: absolute;top: 0px;right: 7px;cursor: pointer;font-size: 13px;" class="getMaNum">获取验证码</span>
				</div>
				<input type="submit" value="确定" style="width: 90%;border-radius: 20px;" class="sendreg"/>
			</form>
		</div>
		
		
		<script src="js/jquery2.01.js"></script>
		<script src="mui/js/mui.min.js"></script>
		<script src="ydui/js/ydui.js"></script>
		<script src="js/comment.js"></script>
		<script>
			$(function() {
				var dialog = YDUI.dialog;

				// 点击立即获取资料进行验证请求
				$('.getResults').on('click', function() {
					var msgrArr = ['最高学历未勾选', '年龄段未勾选', '户籍未勾选', '请填写的您的姓名', '请填写您的11位手机号码'];
					var $Educations = $('.Education');
					var $Ages = $('.Age');
					var $HouseholdRegisters = $('.HouseholdRegister');
					var $Names = $('.personName');
					var $Phones = $('.phone');
					var myreg=/^[1][3,4,5,7,8][0-9]{9}$/;
					
					var timer = 0;
					var timenum = 60;
					var ma = 0; //短信验证码
					
					if (Boolean_Result($Educations) === false) {
						dialog.alert(msgrArr[0])
						return false;
					}
					if (Boolean_Result($Ages) === false) {
						dialog.alert(msgrArr[1])
						return false;
					}
					if (Boolean_Result($HouseholdRegisters) === false) {
						dialog.alert(msgrArr[2])
						return false;
					}
					//  personName phone
					if (!$.trim($Names.val())) {
						console.log(454545)
						dialog.alert(msgrArr[3])
						return false;
					}
					if (!$.trim($Phones.val())) {
						console.log(454545)
						dialog.alert(msgrArr[4])
						return false;
					}
					
					if (!myreg.test($.trim($Phones.val()))) {
						dialog.alert('请输入正确的11位有效手机号码')
						return false;
					} 
					
					show_tel()
					Show_motai(['.motal','.phoneModel'])
					
					
					timer = setInterval(function(){
						timenum--;
						if(timenum<=0){
							timenum = 60;
							$('.getMaNum').text('获取验证码').css({color:'#007AFF'})
							ma = 0;
							clearInterval(timer);
						}else{
							$('.getMaNum').text('重新获取('+ timenum +')').css({color:'#999'})
						}
						
					},1000)
					
					// 确定验证码 getMaNum
					$('.sendreg').on('click',function(){
						var Ma = $.trim($('.ma').val())
						
						$('.ma').val("")  //清空输入框
						
						
						if(!Ma){
							dialog.alert('请输入验证码')
							return false;
						}
						if(Ma != ma){ //输入的验证码不正确
							dialog.alert('输入的验证码不正确')
							return false;
						}
						if(ma==0){ //验证码过期
							dialog.alert('验证码过期')
							return false;
						}
						
						if(Ma == ma){
							// ajax 提交验证码
							$.ajax({
								url:'',
								
							})
							// ajax 成功后提示信息
							
							dialog.alert('验证码过期')
						}
						
						return false;
					})
					
					// 获取验证码
					$('.getMaNum').on('click',function(){
						if(timenum !=60){
							return false;
						}
						if(timenum == 60){
							timer = setInterval(function(){
								timenum--;
								if(timenum<=0){
									timenum = 60;
									$('.getMaNum').text('获取验证码').css({color:'#007AFF'})
									ma = 0; //验证码过期
									clearInterval(timer);
								}else{
									$('.getMaNum').text('重新获取('+ timenum +')').css({color:'#999'})
								}
								
							},1000)
							// ajax 请求验证码
							
						}
						
					})
					
					
					// ajax 请求验证码
					
					
					
					console.log('可以提交啦')
					
					return false;
				})
				
				// 选择自动勾选历史手机
				$('.p-cheack').on('click',function(){
					if($('.p-cheack input').hasClass('cur')){
						$('.p-cheack input').removeClass('cur');
						console.log($('.check').prop('checked'))
					}else{
						$('.p-cheack input').addClass('cur')
					}
					
				})
				
				
				
				// 个人信息弹框操作  motal getResultModel phoneModel 
				$('.person').on('click',function(){
					Show_motai(['.motal','.getResultModel'])
				})
				//关闭弹框
				$('.close').on('click',function(){
					Hide_motai(['.motal','.getResultModel','.phoneModel'])
				})
				

			})



			//  实现一个集合组,判断是否有一个是你正确的,那结果就是正确的;  arrClass 是jq 集合对象
			// Array.prototype.slice.call($('.gradation'))
			function Boolean_Result(ArrObj) {
				var ArrObjs = Array.prototype.slice.call(ArrObj); //把jq 集合转换为数组
				return ArrObjs.some(function(el) {
					return $(el).prop('checked') === true;
				})
			}
			
			
			//显示手机号码过滤
			function show_tel(){
				var tels = [];
				var $telObj = $('.telphone');
				$telObj.text(strchange($.trim($('.phone').val())))
			}
		</script>
	</body>
</html>
